<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cash Flow Mastery Tool - Wealth Factory</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Playfair+Display:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="components.css">
    <link rel="stylesheet" href="animations.css">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>💰</text></svg>">
    
    <style>
        /* Simple Email Form Styles */
        .email-section {
            background: linear-gradient(135deg, rgba(194, 155, 60, 0.1) 0%, rgba(212, 168, 83, 0.05) 100%);
            border: 1px solid rgba(194, 155, 60, 0.2);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            text-align: center;
        }
        
        .email-section h3 {
            color: #C29B3C;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .email-form {
            display: flex;
            gap: 1rem;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            margin: 1rem 0;
        }
        
        .email-input {
            background: rgba(255, 255, 255, 0.95);
            color: #1a1a1a;
            border: 1px solid rgba(194, 155, 60, 0.3);
            border-radius: 8px;
            padding: 12px 16px;
            font-size: 1rem;
            min-width: 250px;
        }
        
        .email-input:focus {
            outline: none;
            border-color: #C29B3C;
            box-shadow: 0 0 0 3px rgba(194, 155, 60, 0.2);
        }
        
        .email-btn {
            background: linear-gradient(135deg, #C29B3C 0%, #D4A853 100%);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 24px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .email-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(194, 155, 60, 0.3);
        }
        
        .email-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .current-user {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.3);
            border-radius: 8px;
            padding: 12px 16px;
            margin-top: 1rem;
            color: #10B981;
            font-weight: 600;
        }
        
        .status-message {
            padding: 12px 16px;
            border-radius: 8px;
            margin-top: 1rem;
            font-weight: 600;
        }
        
        .status-success {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.3);
            color: #10B981;
        }
        
        .status-error {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: #EF4444;
        }
        
        .status-warning {
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid rgba(245, 158, 11, 0.3);
            color: #F59E0B;
        }
        
        /* Fix input fields in main form */
        .main-content .premium-input,
        .financial-item .premium-input {
            background: rgba(255, 255, 255, 0.95) !important;
            color: #1a1a1a !important;
            border: 1px solid rgba(194, 155, 60, 0.3);
        }
        
        .main-content .premium-input:focus,
        .financial-item .premium-input:focus {
            background: white !important;
            color: #1a1a1a !important;
            border-color: #C29B3C;
            box-shadow: 0 0 0 3px rgba(194, 155, 60, 0.2);
        }
        
        .main-content .premium-input::placeholder,
        .financial-item .premium-input::placeholder {
            color: #888;
        }
        
        /* Notification styles */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 16px 24px;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            z-index: 10000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
            max-width: 300px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.success { background: #10B981; }
        .notification.error { background: #EF4444; }
        .notification.warning { background: #F59E0B; }
        .notification.info { background: #3B82F6; }

        /* Enhanced logo styles */
        .wealth-logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .wealth-logo svg {
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
        }

        .wealth-logo-text {
            color: white;
            font-weight: 700;
            font-size: 18px;
            letter-spacing: 1px;
            font-family: 'Inter', sans-serif;
        }

        .wealth-logo-loader {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 2rem;
        }

        .wealth-logo-loader svg {
            filter: drop-shadow(0 2px 8px rgba(194, 155, 60, 0.3));
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loader">
            <div class="wealth-logo-loader">
                <svg width="80" height="30" viewBox="0 0 1120 409" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#ffffff">
                        <path d="M 191.75 407.50 c -0.80 -0.50 -1.70 -1.10 -2 -1.35 -0.25 -0.25 -1.75 -1.20 -3.25 -2.15 -1.50 -0.95 -3.05 -2 -3.40 -2.35 -0.35 -0.35 -0.85 -0.65 -1.10 -0.65 -0.25 0 -0.75 -0.30 -1.10 -0.65 -0.35 -0.35 -2.10 -1.55 -3.90 -2.70 -2.80 -1.85 -3.80 -2.20 -6.75 -2.45 -7.85 -0.65 -11.60 -1.10 -12.80 -1.45 -0.85 -0.30 -7.70 2.45 -17.70 7 -4.20 1.95 -4.80 2 -10.50 0.75 -1.35 -0.30 -3.05 -0.65 -3.75 -0.75 -0.70 -0.15 -1.80 -0.35 -2.50 -0.50 -0.70 -0.20 -1.70 -0.35 -2.25 -0.45 -3.15 -0.45 -5.45 -1.40 -14.50 -5.95 -7.05 -3.50 -10.60 -5.60 -12.10 -7.05 -1.15 -1.10 -3.25 -3.05 -4.65 -4.30 -1.45 -1.25 -2.90 -2.50 -3.25 -2.85 -0.35 -0.35 -1.15 -0.50 -1.80 -0.35 -0.65 0.10 -2 0.35 -2.95 0.50 -0.95 0.10 -2.40 0.40 -3.25 0.60 -0.80 0.15 -1.70 0.35 -2 0.35 -0.25 0.05 -1.40 0.25 -2.50 0.45 -1.10 0.20 -2.65 0.45 -3.50 0.55 -0.80 0.10 -2 0.35 -2.65 0.45 -0.85 0.20 -5.15 -1.70 -14.45 -6.35 l -13.25 -6.60 -6.95 -13.85 c -4.85 -9.80 -6.80 -14.20 -6.65 -15 0.15 -0.65 0.40 -1.95 0.50 -2.90 0.15 -0.95 0.55 -3.20 0.95 -5 0.40 -1.80 0.80 -4.25 0.95 -5.50 0.15 -1.25 0.40 -2.85 0.55 -3.65 0.25 -1.15 -0.20 -1.90 -2.85 -4.75 -1.70 -1.85 -3.45 -3.70 -3.90 -4.10 -2.20 -2.15 -4.30 -5.65 -8.35 -13.80 -4.30 -8.55 -5.20 -11.10 -6.35 -18.20 -0.10 -0.70 -0.40 -2.15 -0.70 -3.25 -1.35 -5.30 -1.25 -6.30 0.95 -11.30 5.45 -12.40 6.60 -15.30 6.60 -16.70 0 -1.50 -0.50 -6.25 -0.90 -9 -0.15 -0.80 -0.35 -2.75 -0.50 -4.25 -0.40 -4.10 -0.40 -4.20 -2.30 -7.10 -1 -1.45 -3.30 -4.90 -5.10 -7.65 -1.80 -2.75 -3.50 -5.20 -3.70 -5.50 -2.10 -2.60 -2.15 -2.95 -2.15 -13.45 l 0 -10.25 3.15 -4.55 c 1.70 -2.45 4.60 -6.85 6.50 -9.75 3.10 -4.75 3.40 -5.45 3.60 -8.35 0.30 -4.25 0.65 -7.30 1 -9.40 0.80 -4.75 0.65 -5.50 -1.70 -10.90 -1.30 -2.95 -3.30 -7.50 -4.45 -10.15 -2.30 -5.15 -2.30 -5.05 -0.90 -11.95 2.35 -11.50 2.40 -11.60 7.35 -21.50 2.65 -5.35 5.30 -10.30 5.80 -10.95 0.50 -0.70 2.75 -3.10 5.05 -5.30 4.30 -4.30 4.55 -4.80 3.65 -8.25 -0.30 -0.95 -0.60 -3 -0.80 -4.50 -0.15 -1.50 -0.35 -3.10 -0.50 -3.50 -0.25 -0.75 -0.50 -2.20 -1.05 -6.30 -0.25 -1.95 0.30 -3.20 6.45 -15.50 l 6.75 -13.45 13 -6.45 c 13.35 -6.65 14.40 -7 18.60 -6.20 1.25 0.25 2.95 0.55 3.75 0.70 1.90 0.30 4.85 0.80 5.50 1 0.30 0.10 1.70 0.35 3.20 0.60 l 2.70 0.45 5.25 -5.20 5.25 -5.20 9.80 -4.90 c 6.85 -3.40 10.80 -5.10 13.05 -5.50 1.80 -0.35 3.70 -0.75 4.25 -0.85 0.55 -0.10 1.80 -0.35 2.75 -0.50 0.95 -0.15 2.15 -0.35 2.60 -0.50 0.50 -0.15 1.50 -0.35 2.25 -0.50 0.80 -0.10 1.95 -0.35 2.65 -0.45 0.85 -0.20 4.40 1.10 11.40 4.20 l 10.10 4.50 4.15 -0.50 c 6.50 -0.75 9.50 -1.05 10.80 -1 2.05 0.10 4.70 -0.90 7.30 -2.70 1.40 -0.95 4.40 -3.05 6.75 -4.60 2.35 -1.60 4.35 -3 4.50 -3.15 0.15 -0.15 1.15 -0.85 2.30 -1.65 l 2 -1.35 10.40 0 c 9.15 0 10.55 0.10 11.55 0.90 1.35 1 1.75 1.30 6.75 4.60 2.05 1.35 4 2.70 4.25 2.90 0.30 0.25 1.20 0.85 2 1.40 0.85 0.50 1.60 1.05 1.75 1.25 0.75 0.95 3.80 1.95 6.60 2.25 4.55 0.40 5.85 0.55 8.65 0.90 1.40 0.20 3.35 0.45 4.35 0.60 1.60 0.20 3.55 -0.45 11.75 -4.10 9.80 -4.30 11.85 -4.90 14.05 -4.10 0.60 0.20 1.85 0.50 2.75 0.60 0.85 0.15 2.75 0.50 4.10 0.80 2.55 0.55 2.95 0.60 6.50 1.25 1.10 0.20 6.45 2.60 11.85 5.30 7.40 3.70 10.45 5.50 12.35 7.30 7.65 7.35 9.15 8.25 12.30 7.15 0.55 -0.20 2.25 -0.50 3.75 -0.70 1.50 -0.15 3.20 -0.40 3.75 -0.50 0.55 -0.10 2.70 -0.45 4.85 -0.75 l 3.80 -0.60 39.95 20 c 21.95 11 40.25 20.30 40.70 20.65 0.45 0.35 1.20 1.50 1.70 2.55 0.45 1 1.40 2.35 2.05 3 0.65 0.60 1.20 1.35 1.20 1.70 0 0.30 0.20 0.70 0.45 0.90 0.30 0.15 8.60 -3.80 18.50 -8.75 l 18.05 -9 8.50 0 8.50 0 9.75 4.85 9.75 4.90 10.15 -5.05 c 13.30 -6.65 12.45 -6.65 26.25 0.25 l 9.85 4.95 9.75 -4.95 9.75 -4.90 8.40 0 8.35 -0.05 7 3.50 7 3.50 7 -3.50 7 -3.50 28.50 0 28.50 0 15.75 7.85 15.75 7.90 15.90 -7.95 c 10.45 -5.25 16.50 -8 17.75 -8.10 1.65 -0.15 4.40 1.10 18.90 8.30 l 16.95 8.50 16.50 -8.25 16.50 -8.25 7.50 0 7.50 0 12.15 6.05 12.10 6.05 12.15 -6.05 12.10 -6.05 36.85 0.05 36.90 0 6.25 3.15 6.25 3.20 6.35 -3.20 6.40 -3.20 7.60 0.05 7.65 0 10.75 5.40 10.75 5.45 10.75 -5.40 10.75 -5.35 8 0.10 8 0.10 7.65 3.80 7.60 3.85 12.35 24.65 12.35 24.60 0.05 43.50 c 0.10 36.65 0 43.85 -0.60 45.70 -0.65 2 -0.65 2.40 0.15 4.10 l 0.85 1.95 11.15 0 11.20 0 8.95 8.95 8.95 8.95 -1.20 3.95 c -0.70 2.15 -2.25 7.30 -3.50 11.40 -1.20 4.15 -2.40 8.05 -2.65 8.75 -0.25 0.70 -1.20 3.60 -2.05 6.50 -0.85 2.90 -2.10 6.95 -2.75 9 -0.65 2.05 -1.75 5.75 -2.50 8.20 l -1.40 4.45 -0.10 17.80 -0.10 17.80 -8 16.05 -8.05 16 -6.65 6.65 c -3.65 3.65 -7.15 7 -7.75 7.40 -1.05 0.65 -1.90 0.30 -12.65 -5.10 l -11.55 -5.75 -11.15 5.60 -11.10 5.55 -9 0.15 -9 0.15 -9.25 -4.55 -9.30 -4.50 -8.70 4.40 -8.75 4.35 -7.85 0.05 -7.90 0.05 -13.85 -7 -13.90 -7 -8.95 4.55 c -5 2.55 -11.45 5.35 -14.50 6.35 -5.15 1.70 -6.60 2.05 -11.30 2.65 -0.95 0.10 -3.05 0.40 -4.70 0.60 -4.50 0.70 -22.05 0.30 -26.05 -0.55 -0.80 -0.20 -2.50 -0.45 -3.70 -0.60 -1.15 -0.20 -2.70 -0.50 -3.35 -0.75 -0.65 -0.25 -1.20 -0.35 -1.20 -0.25 0 0.70 -8.95 -3.15 -20.65 -8.90 l -13.35 -6.55 -17.90 8.80 -17.85 8.80 -7.50 -0.10 -7.50 -0.10 -13.25 -6.65 -13.20 -6.65 -11.30 5.50 c -11.60 5.70 -11.90 5.85 -15.25 6.35 -2.10 0.30 -3.70 0.60 -5.75 1 -4.65 0.95 -24.25 1.35 -30.50 0.60 -11.30 -1.30 -18.50 -3.35 -27 -7.60 l -5.45 -2.75 -10.40 5.15 -10.40 5.15 -8.25 -0.05 -8.25 -0.10 -8.60 -4.30 -8.65 -4.35 -8.95 0 -9 0 -8.90 4.40 -8.90 4.40 -8.15 -0.05 -8.20 -0.05 -13.45 -6.70 -13.45 -6.75 -13.65 6.80 -13.60 6.75 -7.50 -0.10 -7.50 -0.10 -24 -11.95 -24 -11.95 -1.50 1.65 c -1.15 1.25 -11.70 6.75 -42.40 22.15 -22.50 11.30 -41.15 20.40 -41.40 20.20 -0.40 -0.25 -6.50 -1.30 -11.30 -1.95 -0.65 -0.10 -2.10 -0.35 -3.25 -0.55 -1.20 -0.20 -2.55 -0.40 -3.05 -0.45 -0.50 -0.05 -2.95 1.90 -5.85 4.70 -4.90 4.75 -5.05 4.85 -15.35 9.95 -5.70 2.80 -11.15 5.20 -12.05 5.35 -0.90 0.15 -3.25 0.60 -5.25 1.05 -1.95 0.45 -4.40 0.90 -5.35 1.05 -0.95 0.15 -2.15 0.45 -2.60 0.70 -1.95 1.05 -4.45 0.35 -13.90 -3.85 -5.35 -2.35 -10.30 -4.30 -11 -4.35 -0.70 0 -2.35 0.15 -3.75 0.35 -2.65 0.40 -3.85 0.55 -9.70 1 -3.50 0.30 -6 1.35 -8.85 3.70 -0.25 0.25 -1.05 0.75 -1.70 1.10 -0.65 0.35 -1.45 0.85 -1.70 1.10 -0.30 0.25 -2.90 2 -5.80 3.90 l -5.25 3.45 -10.50 0 c -9.35 0 -10.65 -0.10 -12 -0.95 z"/>
                    </g>
                    <g fill="#C29B3C">
                        <path d="M192.40 407.90 c-0.75 -1.20 -7.20 -14.25 -9.85 -19.95 -1.70 -3.65 -1.85 -3.80 -5.65 -4.20 -1.45 -0.15 -3.55 -0.50 -4.65 -0.75 -1.10 -0.20 -3.35 -0.70 -5 -1 -2.90 -0.55 -3.90 -0.80 -8.85 -2.05 l-2.40 -0.55 -3.60 3.15 c-2 1.75 -3.75 3.30 -3.90 3.45 -0.15 0.15 -3 2.70 -6.40 5.70 -6.15 5.40 -6.15 5.40 -8.25 5.10 -1.10 -0.20 -2.30 -0.50 -2.60 -0.75 -0.25 -0.20 -2.40 -1.15 -4.75 -2.05 -2.35 -0.90 -4.45 -1.85 -4.75 -2.10 -0.25 -0.20 -0.75 -0.40 -1.10 -0.40 -0.35 0 -1.65 -0.45 -2.80 -1 l-2.15 -1 -0.60 -5.70 c-0.35 -3.10 -0.60 -7.30 -0.60 -9.35 0 -2.05 -0.25 -5.60 -0.50 -7.95 -0.50 -4.45 -0.80 -4.95 -4 -6.60 -1.70 -0.85 -12.65 -8.15 -15.30 -10.15 -1.85 -1.40 -2.40 -1.60 -3.55 -1.25 -1.90 0.55 -9.10 3 -16.90 5.70 -3.55 1.25 -6.95 2.30 -7.50 2.30 -0.65 0 -3.65 -2.65 -8.15 -7.15 -7.15 -7.15 -7.80 -8.15 -6.60 -10.25 0.25 -0.45 1.15 -3 2 -5.60 0.85 -2.60 1.75 -5.20 2 -5.75 0.25 -0.55 1.25 -3.45 2.25 -6.45 l1.80 -5.45 -1.15 -1.60 c-3.05 -4.25 -10.40 -15.25 -10.40 -15.50 0 -0.15 -0.55 -1.15 -1.25 -2.20 l-1.30 -1.90 -6.10 -0.55 c-3.35 -0.30 -8.70 -0.70 -11.85 -0.85 -9.05 -0.40 -9.20 -0.40 -10.50 -3.45 -0.60 -1.40 -1.55 -3.50 -2.05 -4.65 -0.50 -1.20 -0.95 -2.45 -0.95 -2.80 0 -0.35 -0.20 -0.85 -0.45 -1.15 -0.65 -0.70 -3.05 -7.10 -3.05 -8.10 0 -0.45 3.95 -5.35 8.80 -10.85 7.45 -8.45 8.75 -10.20 8.50 -11.25 -0.10 -0.70 -0.45 -2.15 -0.70 -3.25 -1.50 -6.10 -2.45 -11 -3.10 -15.50 -0.25 -1.90 -0.60 -3.80 -0.75 -4.25 -0.15 -0.40 -5.45 -3.30 -11.75 -6.40 -6.35 -3.15 -11.65 -5.90 -11.80 -6.20 -0.45 -0.70 -1.20 -1.05 12.20 5.60 6.35 3.15 11.70 6.10 11.85 6.50 0.15 0.45 0.50 2.35 0.75 4.25 0.65 4.55 1.70 9.85 3.10 15.50 0.25 1.10 0.60 2.80 0.75 3.75 0.25 1.85 1.05 0.90 -16.75 21.15 -0.70 0.75 -0.65 1.20 0.65 4.50"/>
                    </g>
                </svg>
                <span class="wealth-logo-text">WEALTH FACTORY</span>
            </div>
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
            <p>Loading your financial dashboard...</p>
        </div>
    </div>

    <!-- Main Application -->
    <div id="app" class="app-container" style="display: none;">
        <!-- Navigation Header -->
        <nav class="premium-nav">
            <div class="nav-container">
                <div class="nav-brand">
                    <div class="wealth-logo">
                        <svg width="60" height="22" viewBox="0 0 1120 409" fill="white" xmlns="http://www.w3.org/2000/svg">
                            <g fill="white">
                                <path d="M 191.75 407.50 c -0.80 -0.50 -1.70 -1.10 -2 -1.35 -0.25 -0.25 -1.75 -1.20 -3.25 -2.15 -1.50 -0.95 -3.05 -2 -3.40 -2.35 -0.35 -0.35 -0.85 -0.65 -1.10 -0.65 -0.25 0 -0.75 -0.30 -1.10 -0.65 -0.35 -0.35 -2.10 -1.55 -3.90 -2.70 -2.80 -1.85 -3.80 -2.20 -6.75 -2.45 -7.85 -0.65 -11.60 -1.10 -12.80 -1.45 -0.85 -0.30 -7.70 2.45 -17.70 7 -4.20 1.95 -4.80 2 -10.50 0.75 -1.35 -0.30 -3.05 -0.65 -3.75 -0.75 -0.70 -0.15 -1.80 -0.35 -2.50 -0.50 -0.70 -0.20 -1.70 -0.35 -2.25 -0.45 -3.15 -0.45 -5.45 -1.40 -14.50 -5.95 -7.05 -3.50 -10.60 -5.60 -12.10 -7.05 -1.15 -1.10 -3.25 -3.05 -4.65 -4.30 -1.45 -1.25 -2.90 -2.50 -3.25 -2.85 -0.35 -0.35 -1.15 -0.50 -1.80 -0.35 -0.65 0.10 -2 0.35 -2.95 0.50 -0.95 0.10 -2.40 0.40 -3.25 0.60 -0.80 0.15 -1.70 0.35 -2 0.35 -0.25 0.05 -1.40 0.25 -2.50 0.45 -1.10 0.20 -2.65 0.45 -3.50 0.55 -0.80 0.10 -2 0.35 -2.65 0.45 -0.85 0.20 -5.15 -1.70 -14.45 -6.35 l -13.25 -6.60 -6.95 -13.85 c -4.85 -9.80 -6.80 -14.20 -6.65 -15 0.15 -0.65 0.40 -1.95 0.50 -2.90 0.15 -0.95 0.55 -3.20 0.95 -5 0.40 -1.80 0.80 -4.25 0.95 -5.50 0.15 -1.25 0.40 -2.85 0.55 -3.65 0.25 -1.15 -0.20 -1.90 -2.85 -4.75 -1.70 -1.85 -3.45 -3.70 -3.90 -4.10 -2.20 -2.15 -4.30 -5.65 -8.35 -13.80 -4.30 -8.55 -5.20 -11.10 -6.35 -18.20 -0.10 -0.70 -0.40 -2.15 -0.70 -3.25 -1.35 -5.30 -1.25 -6.30 0.95 -11.30 5.45 -12.40 6.60 -15.30 6.60 -16.70 0 -1.50 -0.50 -6.25 -0.90 -9 -0.15 -0.80 -0.35 -2.75 -0.50 -4.25 -0.40 -4.10 -0.40 -4.20 -2.30 -7.10 -1 -1.45 -3.30 -4.90 -5.10 -7.65 -1.80 -2.75 -3.50 -5.20 -3.70 -5.50 -2.10 -2.60 -2.15 -2.95 -2.15 -13.45 l 0 -10.25 3.15 -4.55 c 1.70 -2.45 4.60 -6.85 6.50 -9.75 3.10 -4.75 3.40 -5.45 3.60 -8.35 0.30 -4.25 0.65 -7.30 1 -9.40 0.80 -4.75 0.65 -5.50 -1.70 -10.90 -1.30 -2.95 -3.30 -7.50 -4.45 -10.15 -2.30 -5.15 -2.30 -5.05 -0.90 -11.95 2.35 -11.50 2.40 -11.60 7.35 -21.50 2.65 -5.35 5.30 -10.30 5.80 -10.95 0.50 -0.70 2.75 -3.10 5.05 -5.30 4.30 -4.30 4.55 -4.80 3.65 -8.25 -0.30 -0.95 -0.60 -3 -0.80 -4.50 -0.15 -1.50 -0.35 -3.10 -0.50 -3.50 -0.25 -0.75 -0.50 -2.20 -1.05 -6.30 -0.25 -1.95 0.30 -3.20 6.45 -15.50 l 6.75 -13.45 13 -6.45 c 13.35 -6.65 14.40 -7 18.60 -6.20 1.25 0.25 2.95 0.55 3.75 0.70 1.90 0.30 4.85 0.80 5.50 1 0.30 0.10 1.70 0.35 3.20 0.60 l 2.70 0.45 5.25 -5.20 5.25 -5.20 9.80 -4.90 c 6.85 -3.40 10.80 -5.10 13.05 -5.50 1.80 -0.35 3.70 -0.75 4.25 -0.85 0.55 -0.10 1.80 -0.35 2.75 -0.50 0.95 -0.15 2.15 -0.35 2.60 -0.50 0.50 -0.15 1.50 -0.35 2.25 -0.50 0.80 -0.10 1.95 -0.35 2.65 -0.45 0.85 -0.20 4.40 1.10 11.40 4.20 l 10.10 4.50 4.15 -0.50 c 6.50 -0.75 9.50 -1.05 10.80 -1 2.05 0.10 4.70 -0.90 7.30 -2.70 1.40 -0.95 4.40 -3.05 6.75 -4.60 2.35 -1.60 4.35 -3 4.50 -3.15 0.15 -0.15 1.15 -0.85 2.30 -1.65 l 2 -1.35 10.40 0 c 9.15 0 10.55 0.10 11.55 0.90 1.35 1 1.75 1.30 6.75 4.60 2.05 1.35 4 2.70 4.25 2.90 0.30 0.25 1.20 0.85 2 1.40 0.85 0.50 1.60 1.05 1.75 1.25 0.75 0.95 3.80 1.95 6.60 2.25 4.55 0.40 5.85 0.55 8.65 0.90 1.40 0.20 3.35 0.45 4.35 0.60 1.60 0.20 3.55 -0.45 11.75 -4.10 9.80 -4.30 11.85 -4.90 14.05 -4.10 0.60 0.20 1.85 0.50 2.75 0.60 0.85 0.15 2.75 0.50 4.10 0.80 2.55 0.55 2.95 0.60 6.50 1.25 1.10 0.20 6.45 2.60 11.85 5.30 7.40 3.70 10.45 5.50 12.35 7.30 7.65 7.35 9.15 8.25 12.30 7.15 0.55 -0.20 2.25 -0.50 3.75 -0.70 1.50 -0.15 3.20 -0.40 3.75 -0.50 0.55 -0.10 2.70 -0.45 4.85 -0.75 l 3.80 -0.60 39.95 20 c 21.95 11 40.25 20.30 40.70 20.65 0.45 0.35 1.20 1.50 1.70 2.55 0.45 1 1.40 2.35 2.05 3 0.65 0.60 1.20 1.35 1.20 1.70 0 0.30 0.20 0.70 0.45 0.90 0.30 0.15 8.60 -3.80 18.50 -8.75 l 18.05 -9 8.50 0 8.50 0 9.75 4.85 9.75 4.90 10.15 -5.05 c 13.30 -6.65 12.45 -6.65 26.25 0.25 l 9.85 4.95 9.75 -4.95 9.75 -4.90 8.40 0 8.35 -0.05 7 3.50 7 3.50 7 -3.50 7 -3.50 28.50 0 28.50 0 15.75 7.85 15.75 7.90 15.90 -7.95 c 10.45 -5.25 16.50 -8 17.75 -8.10 1.65 -0.15 4.40 1.10 18.90 8.30 l 16.95 8.50 16.50 -8.25 16.50 -8.25 7.50 0 7.50 0 12.15 6.05 12.10 6.05 12.15 -6.05 12.10 -6.05 36.85 0.05 36.90 0 6.25 3.15 6.25 3.20 6.35 -3.20 6.40 -3.20 7.60 0.05 7.65 0 10.75 5.40 10.75 5.45 10.75 -5.40 10.75 -5.35 8 0.10 8 0.10 7.65 3.80 7.60 3.85 12.35 24.65 12.35 24.60 0.05 43.50 c 0.10 36.65 0 43.85 -0.60 45.70 -0.65 2 -0.65 2.40 0.15 4.10 l 0.85 1.95 11.15 0 11.20 0 8.95 8.95 8.95 8.95 -1.20 3.95 c -0.70 2.15 -2.25 7.30 -3.50 11.40 -1.20 4.15 -2.40 8.05 -2.65 8.75 -0.25 0.70 -1.20 3.60 -2.05 6.50 -0.85 2.90 -2.10 6.95 -2.75 9 -0.65 2.05 -1.75 5.75 -2.50 8.20 l -1.40 4.45 -0.10 17.80 -0.10 17.80 -8 16.05 -8.05 16 -6.65 6.65 c -3.65 3.65 -7.15 7 -7.75 7.40 -1.05 0.65 -1.90 0.30 -12.65 -5.10 l -11.55 -5.75 -11.15 5.60 -11.10 5.55 -9 0.15 -9 0.15 -9.25 -4.55 -9.30 -4.50 -8.70 4.40 -8.75 4.35 -7.85 0.05 -7.90 0.05 -13.85 -7 -13.90 -7 -8.95 4.55 c -5 2.55 -11.45 5.35 -14.50 6.35 -5.15 1.70 -6.60 2.05 -11.30 2.65 -0.95 0.10 -3.05 0.40 -4.70 0.60 -4.50 0.70 -22.05 0.30 -26.05 -0.55 -0.80 -0.20 -2.50 -0.45 -3.70 -0.60 -1.15 -0.20 -2.70 -0.50 -3.35 -0.75 -0.65 -0.25 -1.20 -0.35 -1.20 -0.25 0 0.70 -8.95 -3.15 -20.65 -8.90 l -13.35 -6.55 -17.90 8.80 -17.85 8.80 -7.50 -0.10 -7.50 -0.10 -13.25 -6.65 -13.20 -6.65 -11.30 5.50 c -11.60 5.70 -11.90 5.85 -15.25 6.35 -2.10 0.30 -3.70 0.60 -5.75 1 -4.65 0.95 -24.25 1.35 -30.50 0.60 -11.30 -1.30 -18.50 -3.35 -27 -7.60 l -5.45 -2.75 -10.40 5.15 -10.40 5.15 -8.25 -0.05 -8.25 -0.10 -8.60 -4.30 -8.65 -4.35 -8.95 0 -9 0 -8.90 4.40 -8.90 4.40 -8.15 -0.05 -8.20 -0.05 -13.45 -6.70 -13.45 -6.75 -13.65 6.80 -13.60 6.75 -7.50 -0.10 -7.50 -0.10 -24 -11.95 -24 -11.95 -1.50 1.65 c -1.15 1.25 -11.70 6.75 -42.40 22.15 -22.50 11.30 -41.15 20.40 -41.40 20.20 -0.40 -0.25 -6.50 -1.30 -11.30 -1.95 -0.65 -0.10 -2.10 -0.35 -3.25 -0.55 -1.20 -0.20 -2.55 -0.40 -3.05 -0.45 -0.50 -0.05 -2.95 1.90 -5.85 4.70 -4.90 4.75 -5.05 4.85 -15.35 9.95 -5.70 2.80 -11.15 5.20 -12.05 5.35 -0.90 0.15 -3.25 0.60 -5.25 1.05 -1.95 0.45 -4.40 0.90 -5.35 1.05 -0.95 0.15 -2.15 0.45 -2.60 0.70 -1.95 1.05 -4.45 0.35 -13.90 -3.85 -5.35 -2.35 -10.30 -4.30 -11 -4.35 -0.70 0 -2.35 0.15 -3.75 0.35 -2.65 0.40 -3.85 0.55 -9.70 1 -3.50 0.30 -6 1.35 -8.85 3.70 -0.25 0.25 -1.05 0.75 -1.70 1.10 -0.65 0.35 -1.45 0.85 -1.70 1.10 -0.30 0.25 -2.90 2 -5.80 3.90 l -5.25 3.45 -10.50 0 c -9.35 0 -10.65 -0.10 -12 -0.95 z"/>
                            </g>
                            <g fill="#C29B3C">
                                <path d="M194.50 351.20 c-5.40 -0.25 -14.70 -1.50 -20.35 -2.75 -4.30 -0.95 -6.95 -1.55 -8.15 -1.95 -0.70 -0.20 -2.25 -0.65 -3.50 -1 -4.40 -1.25 -8.40 -2.60 -12 -4.10 -0.70 -0.30 -1.70 -0.70 -2.25 -0.90 -4.05 -1.55 -11.95 -5.40 -15.50 -7.50 -1.35 -0.85 -2.85 -1.65 -3.25 -1.85 -1.85 -0.80 -13.05 -8.50 -17.40 -12.05 -7.70 -6.15 -19.30 -17.95 -24.45 -24.90 -0.60 -0.80 -1.80 -2.45 -2.75 -3.70 -2.40 -3.20 -5.90 -8.40 -5.90 -8.75 0 -0.20 -0.40 -0.95 -0.95 -1.65 -3.95 -5.60 -10.60 -20 -13.75 -29.85 -3.55 -10.90 -5.50 -20.65 -6.85 -33.75 -1.05 -10.15 0.15 -31.30 2.25 -40.25 0.10 -0.55 0.50 -2.35 0.80 -4 0.35 -1.65 0.80 -3.55 1 -4.25 0.20 -0.70 0.65 -2.25 1 -3.50 0.85 -3 3.45 -10.95 4.05 -12.35 0.85 -2.15 1.60 -3.90 1.95 -4.90 0.60 -1.60 6.90 -14.30 8.35 -16.75 1.35 -2.45 8.55 -13.25 9.80 -14.80 8.65 -10.70 14.25 -16.55 23.15 -24.20 9.20 -7.95 23.50 -16.80 35.70 -22.15 3.45 -1.50 12 -4.75 14.25 -5.35 6.65 -1.90 10.05 -2.75 13.50 -3.45 1.65 -0.35 3.90 -0.80 5 -1.05 4.90 -1.05 19.85 -2.50 25.50 -2.50 6.95 0 18.75 1.10 26.75 2.55 3.70 0.65 10.45 2.20 13.25 3 4 1.15 11.10 3.55 11.85 3.95 0.50 0.30 1.10 0.50 1.40 0.50 0.50 0 1.25 0.35 8.50 3.60 19.95 9 38.45 23.35 53.25 41.45 7.15 8.70 15.10 21.60 19.55 31.70 2.90 6.60 4.10 9.70 5.75 15 0.60 1.95 1.25 3.95 1.50 4.50 1.25 3.20 3.85 16.25 4.90 24.80 0.70 5.50 0.70 27.40 0 32.90 -0.80 6.60 -2.85 17.40 -3.95 21.05 -0.20 0.70 -0.65 2.25 -1 3.50 -1.45 5.05 -4.15 12.75 -6 16.75 -2.30 5.05 -6.05 12.55 -7.50 15 -0.85 1.40 -1.65 2.85 -1.85 3.25 -0.70 1.60 -7.25 10.95 -10.75 15.30 -7.05 8.75 -11.65 13.45 -21.20 21.70 -4.15 3.65 -16.60 12.50 -17.50 12.50 -0.15 0 -0.95 0.45 -1.70 1 -3.85 2.75 -15.05 8.15 -22.75 11 -1.65 0.60 -3.45 1.30 -4 1.50 -3.50 1.40 -12.50 3.85 -18.50 5 -6.45 1.25 -7.65 1.45 -11.50 1.95 -4.30 0.55 -21.60 1.05 -27.75 0.75z"/>
                            </g>
                        </svg>
                        <div class="wealth-logo-text">WEALTH FACTORY</div>
                    </div>
                </div>
                <div class="nav-actions">
                    <button id="saveToAirtable" class="premium-btn primary">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <span>Save to Cloud</span>
                    </button>
                    <button id="exportPDF" class="premium-btn secondary">
                        <i class="fas fa-file-pdf"></i>
                        <span>Export PDF</span>
                    </button>
                    <button id="shareBtn" class="premium-btn tertiary">
                        <i class="fas fa-share-alt"></i>
                    </button>
                </div>
            </div>
        </nav>

        <!-- Email Section for Save/Load -->
        <div class="email-section">
            <h3>
                <i class="fas fa-envelope"></i>
                Save & Load Your Data
            </h3>
            <p>Enter your email to save your financial data to the cloud or load previously saved data.</p>
            
            <div class="email-form">
                <input 
                    type="email" 
                    id="userEmail" 
                    class="email-input" 
                    placeholder="Enter your email address"
                    required
                >
                <input 
                    type="text" 
                    id="userName" 
                    class="email-input" 
                    placeholder="Enter your full name"
                    style="min-width: 200px;"
                >
                <button onclick="loadData()" class="email-btn">
                    <i class="fas fa-download"></i>
                    Load Data
                </button>
                <button onclick="saveData()" class="email-btn">
                    <i class="fas fa-save"></i>
                    Save Data
                </button>
            </div>
            
            <div id="statusMessage"></div>
        </div>

        <!-- Hero Section -->
        <section class="hero-section">
            <div class="hero-content">
                <div class="hero-text">
                    <h1 class="hero-title">
                        <span class="title-main">Cash Flow Mastery</span>
                        <span class="title-sub">Your Blueprint for Financial Excellence</span>
                    </h1>
                    <p class="hero-description">
                        Transform your financial future with precision analytics and strategic insights. 
                        Build wealth systematically with our premium financial planning platform.
                    </p>
                </div>
                <div class="hero-stats">
                    <div class="stat-card">
                        <div class="stat-value" id="hero-net-worth">$0</div>
                        <div class="stat-label">Net Worth</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="hero-monthly-flow">$0</div>
                        <div class="stat-label">Monthly Cash Flow</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="hero-annual-projection">$0</div>
                        <div class="stat-label">Annual Projection</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Tab Navigation -->
            <div class="premium-tabs">
                <div class="tabs-container">
                    <button class="tab-btn active" data-tab="income-statement">
                        <i class="fas fa-chart-line"></i>
                        <span>Income Statement</span>
                        <div class="tab-indicator"></div>
                    </button>
                    <button class="tab-btn" data-tab="balance-sheet">
                        <i class="fas fa-balance-scale"></i>
                        <span>Balance Sheet</span>
                        <div class="tab-indicator"></div>
                    </button>
                    <button class="tab-btn" data-tab="analytics">
                        <i class="fas fa-analytics"></i>
                        <span>Analytics</span>
                        <div class="tab-indicator"></div>
                    </button>
                </div>
            </div>

            <!-- Income Statement Tab -->
            <div id="income-statement" class="tab-content active">
                <div class="content-grid income-grid-new">
                    <!-- Income and Expenses Container -->
                    <div class="income-expenses-container">
                        <!-- Income Section -->
                        <div class="financial-section income-section-top">
                            <div class="section-header">
                                <h2 class="section-title">
                                    <i class="fas fa-arrow-up"></i>
                                    Monthly Income
                                </h2>
                                <div class="section-total" id="total-income">$0</div>
                            </div>
                            
                            <div class="categories-grid income-categories">
                                <!-- Active Income -->
                                <div class="category-card expanded">
                                    <div class="category-header">
                                        <h3><i class="fas fa-briefcase"></i> Active Income</h3>
                                        <div class="category-total" id="active-income-total">$0</div>
                                    </div>
                                    <div class="items-container expanded-items" id="active-income-container">
                                        <div class="financial-item">
                                            <label>Salary/Wages</label>
                                            <input type="number" class="premium-input" data-field="salary_wages" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Distributions</label>
                                            <input type="number" class="premium-input" data-field="distributions" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Commissions</label>
                                            <input type="number" class="premium-input" data-field="commissions" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Bonus</label>
                                            <input type="number" class="premium-input" data-field="bonus" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Interest Income</label>
                                            <input type="number" class="premium-input" data-field="interest_income" step="0.01" placeholder="0.00">
                                        </div>
                                    </div>
                                    <button class="add-item-btn" onclick="addCustomItem('active-income')">
                                        <i class="fas fa-plus"></i>
                                        Add Custom Income
                                    </button>
                                </div>

                                <!-- Portfolio Income -->
                                <div class="category-card expanded">
                                    <div class="category-header">
                                        <h3><i class="fas fa-chart-line"></i> Portfolio Income</h3>
                                        <div class="category-total" id="portfolio-income-total">$0</div>
                                    </div>
                                    <div class="items-container expanded-items" id="portfolio-income-container">
                                        <div class="financial-item">
                                            <label>Dividends</label>
                                            <input type="number" class="premium-input" data-field="dividends" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Royalties</label>
                                            <input type="number" class="premium-input" data-field="royalties" step="0.01" placeholder="0.00">
                                        </div>
                                    </div>
                                    <button class="add-item-btn" onclick="addCustomItem('portfolio-income')">
                                        <i class="fas fa-plus"></i>
                                        Add Custom Portfolio Income
                                    </button>
                                </div>

                                <!-- Passive Income -->
                                <div class="category-card expanded">
                                    <div class="category-header">
                                        <h3><i class="fas fa-building"></i> Passive Income</h3>
                                        <div class="category-total" id="passive-income-total">$0</div>
                                    </div>
                                    <div class="items-container expanded-items" id="passive-income-container">
                                        <div class="financial-item">
                                            <label>Business Income</label>
                                            <input type="number" class="premium-input" data-field="business_income" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Real Estate Income</label>
                                            <input type="number" class="premium-input" data-field="real_estate_income" step="0.01" placeholder="0.00">
                                        </div>
                                    </div>
                                    <button class="add-item-btn" onclick="addCustomItem('passive-income')">
                                        <i class="fas fa-plus"></i>
                                        Add Custom Passive Income
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Divider -->
                        <div class="section-divider">
                            <div class="divider-line"></div>
                            <div class="divider-text">Monthly Expenses</div>
                            <div class="divider-line"></div>
                        </div>

                        <!-- Expenses Section -->
                        <div class="financial-section expenses-section-bottom">
                            <div class="section-header">
                                <h2 class="section-title">
                                    <i class="fas fa-arrow-down"></i>
                                    Monthly Expenses
                                </h2>
                                <div class="section-total" id="total-expenses">$0</div>
                            </div>
                            
                            <div class="categories-grid expenses-categories">
                                <!-- House Expenses -->
                                <div class="category-card expanded">
                                    <div class="category-header">
                                        <h3><i class="fas fa-home"></i> House</h3>
                                        <div class="category-total" id="house-expenses-total">$0</div>
                                    </div>
                                    <div class="items-container expanded-items" id="house-expenses-container">
                                        <div class="financial-item">
                                            <label>Mortgage/Rent</label>
                                            <input type="number" class="premium-input" data-field="mortgage_rent" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>HELOC Payment</label>
                                            <input type="number" class="premium-input" data-field="heloc_payment" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>HOA Fees</label>
                                            <input type="number" class="premium-input" data-field="hoa_fees" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Cell Phone #1</label>
                                            <input type="number" class="premium-input" data-field="cell_phone_1" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Cell Phone #2</label>
                                            <input type="number" class="premium-input" data-field="cell_phone_2" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Internet/WiFi</label>
                                            <input type="number" class="premium-input" data-field="internet" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Cable/Satellite TV</label>
                                            <input type="number" class="premium-input" data-field="cable_satellite" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Home Security</label>
                                            <input type="number" class="premium-input" data-field="home_security" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Insurance (Home/Renters)</label>
                                            <input type="number" class="premium-input" data-field="home_insurance" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Electricity</label>
                                            <input type="number" class="premium-input" data-field="electricity" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Gas</label>
                                            <input type="number" class="premium-input" data-field="gas" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Water/Sewer</label>
                                            <input type="number" class="premium-input" data-field="water_sewer" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Waste Removal</label>
                                            <input type="number" class="premium-input" data-field="waste_removal" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Repairs/Maintenance</label>
                                            <input type="number" class="premium-input" data-field="repairs_maintenance" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Lawncare/Pest</label>
                                            <input type="number" class="premium-input" data-field="lawncare_pest" step="0.01" placeholder="0.00">
                                        </div>
                                    </div>
                                    <button class="add-item-btn" onclick="addCustomItem('house-expenses')">
                                        <i class="fas fa-plus"></i>
                                        Add Custom House Expense
                                    </button>
                                </div>

                                <!-- Transportation -->
                                <div class="category-card expanded">
                                    <div class="category-header">
                                        <h3><i class="fas fa-car"></i> Transportation</h3>
                                        <div class="category-total" id="transportation-expenses-total">$0</div>
                                    </div>
                                    <div class="items-container expanded-items" id="transportation-expenses-container">
                                        <div class="financial-item">
                                            <label>Auto Payment #1</label>
                                            <input type="number" class="premium-input" data-field="auto_payment_1" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Auto Payment #2</label>
                                            <input type="number" class="premium-input" data-field="auto_payment_2" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Auto Insurance</label>
                                            <input type="number" class="premium-input" data-field="auto_insurance" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Registration/Tags</label>
                                            <input type="number" class="premium-input" data-field="registration_tags" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Gas/Fuel</label>
                                            <input type="number" class="premium-input" data-field="gas_fuel" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Auto Repairs</label>
                                            <input type="number" class="premium-input" data-field="auto_repairs" step="0.01" placeholder="0.00">
                                        </div>
                                    </div>
                                    <button class="add-item-btn" onclick="addCustomItem('transportation-expenses')">
                                        <i class="fas fa-plus"></i>
                                        Add Custom Transportation Expense
                                    </button>
                                </div>

                                <!-- Food -->
                                <div class="category-card expanded">
                                    <div class="category-header">
                                        <h3><i class="fas fa-utensils"></i> Food</h3>
                                        <div class="category-total" id="food-expenses-total">$0</div>
                                    </div>
                                    <div class="items-container expanded-items" id="food-expenses-container">
                                        <div class="financial-item">
                                            <label>Groceries</label>
                                            <input type="number" class="premium-input" data-field="groceries" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Restaurants</label>
                                            <input type="number" class="premium-input" data-field="restaurants" step="0.01" placeholder="0.00">
                                        </div>
                                    </div>
                                    <button class="add-item-btn" onclick="addCustomItem('food-expenses')">
                                        <i class="fas fa-plus"></i>
                                        Add Custom Food Expense
                                    </button>
                                </div>

                                <!-- Entertainment -->
                                <div class="category-card expanded">
                                    <div class="category-header">
                                        <h3><i class="fas fa-film"></i> Entertainment</h3>
                                        <div class="category-total" id="entertainment-expenses-total">$0</div>
                                    </div>
                                    <div class="items-container expanded-items" id="entertainment-expenses-container">
                                        <div class="financial-item">
                                            <label>Streaming</label>
                                            <input type="number" class="premium-input" data-field="streaming" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Music</label>
                                            <input type="number" class="premium-input" data-field="music" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Movies</label>
                                            <input type="number" class="premium-input" data-field="movies" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Concerts</label>
                                            <input type="number" class="premium-input" data-field="concerts" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Sporting Events</label>
                                            <input type="number" class="premium-input" data-field="sporting_events" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Live Theater</label>
                                            <input type="number" class="premium-input" data-field="live_theater" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Outdoor Activities</label>
                                            <input type="number" class="premium-input" data-field="outdoor_activities" step="0.01" placeholder="0.00">
                                        </div>
                                    </div>
                                    <button class="add-item-btn" onclick="addCustomItem('entertainment-expenses')">
                                        <i class="fas fa-plus"></i>
                                        Add Custom Entertainment Expense
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Cash Flow Summary -->
                    <div class="financial-section cashflow-section-sidebar">
                        <div class="section-header">
                            <h2 class="section-title">
                                <i class="fas fa-exchange-alt"></i>
                                Cash Flow
                            </h2>
                            <div class="section-total" id="monthly-cash-flow">$0</div>
                        </div>
                        
                        <div class="summary-cards-sidebar">
                            <div class="summary-card">
                                <h4>Monthly Summary</h4>
                                <div class="summary-items">
                                    <div class="summary-item">
                                        <span>Total Income</span>
                                        <span id="summary-income">$0</span>
                                    </div>
                                    <div class="summary-item">
                                        <span>Total Expenses</span>
                                        <span id="summary-expenses">$0</span>
                                    </div>
                                    <div class="summary-item primary">
                                        <span>Monthly Cash Flow</span>
                                        <span id="summary-cash-flow">$0</span>
                                    </div>
                                </div>
                            </div>

                            <div class="summary-card">
                                <h4>Annual Projection</h4>
                                <div class="projection-items">
                                    <div class="projection-item">
                                        <span>Annual Income</span>
                                        <span id="annual-income">$0</span>
                                    </div>
                                    <div class="projection-item">
                                        <span>Annual Expenses</span>
                                        <span id="annual-expenses">$0</span>
                                    </div>
                                    <div class="projection-item primary">
                                        <span>Annual Cash Flow</span>
                                        <span id="annual-cash-flow">$0</span>
                                    </div>
                                </div>
                            </div>

                            <div class="summary-card">
                                <h4>Income Distribution</h4>
                                <div class="chart-container">
                                    <canvas id="incomeDistributionChart" width="200" height="200"></canvas>
                                </div>
                            </div>

                            <div class="summary-card">
                                <h4>Expense Breakdown</h4>
                                <div class="chart-container">
                                    <canvas id="expenseDistributionChart" width="200" height="200"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Balance Sheet Tab -->
            <div id="balance-sheet" class="tab-content">
                <div class="content-grid balance-grid-new">
                    <!-- Assets and Liabilities Container -->
                    <div class="assets-liabilities-container">
                        <!-- Assets Section -->
                        <div class="financial-section assets-section-top">
                            <div class="section-header">
                                <h2 class="section-title">
                                    <i class="fas fa-coins"></i>
                                    Assets
                                </h2>
                                <div class="section-total" id="total-assets">$0</div>
                            </div>
                            
                            <div class="categories-grid assets-categories">
                                <!-- Liquid Assets -->
                                <div class="category-card expanded">
                                    <div class="category-header">
                                        <h3><i class="fas fa-tint"></i> Liquid Assets</h3>
                                        <div class="category-total" id="liquid-total">$0</div>
                                    </div>
                                    <div class="items-container expanded-items" id="liquid-assets-container">
                                        <div class="financial-item">
                                            <label>Cash on Hand</label>
                                            <input type="number" class="premium-input" data-field="cash_on_hand" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Personal Checking</label>
                                            <input type="number" class="premium-input" data-field="personal_checking" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Personal Savings</label>
                                            <input type="number" class="premium-input" data-field="personal_savings" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Business Checking</label>
                                            <input type="number" class="premium-input" data-field="business_checking" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Business Savings</label>
                                            <input type="number" class="premium-input" data-field="business_savings" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Money Market Funds</label>
                                            <input type="number" class="premium-input" data-field="money_market" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Certificates of Deposit</label>
                                            <input type="number" class="premium-input" data-field="certificates_deposit" step="0.01" placeholder="0.00">
                                        </div>
                                    </div>
                                    <button class="add-item-btn" onclick="addCustomItem('liquid-assets')">
                                        <i class="fas fa-plus"></i>
                                        Add Custom Liquid Asset
                                    </button>
                                </div>

                                <!-- Investments -->
                                <div class="category-card expanded">
                                    <div class="category-header">
                                        <h3><i class="fas fa-chart-pie"></i> Investments</h3>
                                        <div class="category-total" id="investments-total">$0</div>
                                    </div>
                                    <div class="items-container expanded-items" id="investments-container">
                                        <div class="financial-item">
                                            <label>Business #1</label>
                                            <input type="number" class="premium-input" data-field="business_1" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Business #2</label>
                                            <input type="number" class="premium-input" data-field="business_2" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Business #3</label>
                                            <input type="number" class="premium-input" data-field="business_3" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Stocks</label>
                                            <input type="number" class="premium-input" data-field="stocks" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Bonds</label>
                                            <input type="number" class="premium-input" data-field="bonds" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Mutual Funds</label>
                                            <input type="number" class="premium-input" data-field="mutual_funds" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>IRA</label>
                                            <input type="number" class="premium-input" data-field="ira" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>401K</label>
                                            <input type="number" class="premium-input" data-field="401k" step="0.01" placeholder="0.00">
                                        </div>
                                    </div>
                                    <button class="add-item-btn" onclick="addCustomItem('investments')">
                                        <i class="fas fa-plus"></i>
                                        Add Custom Investment
                                    </button>
                                </div>

                                <!-- Personal Use Assets -->
                                <div class="category-card expanded">
                                    <div class="category-header">
                                        <h3><i class="fas fa-home"></i> Personal Use Assets</h3>
                                        <div class="category-total" id="personal-assets-total">$0</div>
                                    </div>
                                    <div class="items-container expanded-items" id="personal-assets-container">
                                        <div class="financial-item">
                                            <label>Primary Residence</label>
                                            <input type="number" class="premium-input" data-field="primary_residence" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Auto #1</label>
                                            <input type="number" class="premium-input" data-field="auto_1" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Auto #2</label>
                                            <input type="number" class="premium-input" data-field="auto_2" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Other Personal Assets</label>
                                            <input type="number" class="premium-input" data-field="other_personal_assets" step="0.01" placeholder="0.00">
                                        </div>
                                    </div>
                                    <button class="add-item-btn" onclick="addCustomItem('personal-assets')">
                                        <i class="fas fa-plus"></i>
                                        Add Custom Personal Asset
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Divider -->
                        <div class="section-divider">
                            <div class="divider-line"></div>
                            <div class="divider-text">Liabilities</div>
                            <div class="divider-line"></div>
                        </div>

                        <!-- Liabilities Section -->
                        <div class="financial-section liabilities-section-bottom">
                            <div class="section-header">
                                <h2 class="section-title">
                                    <i class="fas fa-minus-circle"></i>
                                    Liabilities
                                </h2>
                                <div class="section-total" id="total-liabilities">$0</div>
                            </div>
                            
                            <div class="categories-grid liabilities-categories">
                                <!-- Short-term Liabilities -->
                                <div class="category-card expanded">
                                    <div class="category-header">
                                        <h3><i class="fas fa-clock"></i> Short-term Liabilities</h3>
                                        <div class="category-total" id="short-term-total">$0</div>
                                    </div>
                                    <div class="items-container expanded-items" id="short-term-liabilities-container">
                                        <div class="financial-item">
                                            <label>Medical/Dental</label>
                                            <input type="number" class="premium-input" data-field="medical_dental" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Credit Card #1</label>
                                            <input type="number" class="premium-input" data-field="credit_card_1" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Credit Card #2</label>
                                            <input type="number" class="premium-input" data-field="credit_card_2" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Credit Card #3</label>
                                            <input type="number" class="premium-input" data-field="credit_card_3" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Credit Card #4</label>
                                            <input type="number" class="premium-input" data-field="credit_card_4" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Credit Card #5</label>
                                            <input type="number" class="premium-input" data-field="credit_card_5" step="0.01" placeholder="0.00">
                                        </div>
                                    </div>
                                    <button class="add-item-btn" onclick="addCustomItem('short-term-liabilities')">
                                        <i class="fas fa-plus"></i>
                                        Add Custom Short-term Liability
                                    </button>
                                </div>

                                <!-- Long-term Liabilities -->
                                <div class="category-card expanded">
                                    <div class="category-header">
                                        <h3><i class="fas fa-calendar-alt"></i> Long-term Liabilities</h3>
                                        <div class="category-total" id="long-term-total">$0</div>
                                    </div>
                                    <div class="items-container expanded-items" id="long-term-liabilities-container">
                                        <div class="financial-item">
                                            <label>Primary Mortgage</label>
                                            <input type="number" class="premium-input" data-field="primary_mortgage" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>HELOC</label>
                                            <input type="number" class="premium-input" data-field="heloc" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Investment Mortgage</label>
                                            <input type="number" class="premium-input" data-field="investment_mortgage" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Auto Loan #1</label>
                                            <input type="number" class="premium-input" data-field="auto_loan_1" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Auto Loan #2</label>
                                            <input type="number" class="premium-input" data-field="auto_loan_2" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Student Loans</label>
                                            <input type="number" class="premium-input" data-field="student_loans" step="0.01" placeholder="0.00">
                                        </div>
                                        <div class="financial-item">
                                            <label>Personal Loans Balance</label>
                                            <input type="number" class="premium-input" data-field="personal_loans_balance" step="0.01" placeholder="0.00">
                                        </div>
                                    </div>
                                    <button class="add-item-btn" onclick="addCustomItem('long-term-liabilities')">
                                        <i class="fas fa-plus"></i>
                                        Add Custom Long-term Liability
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Net Worth Summary -->
                    <div class="financial-section summary-section-sidebar">
                        <div class="section-header">
                            <h2 class="section-title">
                                <i class="fas fa-trophy"></i>
                                Net Worth
                            </h2>
                            <div class="section-total" id="net-worth">$0</div>
                        </div>
                        
                        <div class="summary-cards-sidebar">
                            <div class="summary-card">
                                <h4>Balance Summary</h4>
                                <div class="summary-items">
                                    <div class="summary-item">
                                        <span>Total Assets</span>
                                        <span id="summary-assets">$0</span>
                                    </div>
                                    <div class="summary-item">
                                        <span>Total Liabilities</span>
                                        <span id="summary-liabilities">$0</span>
                                    </div>
                                    <div class="summary-item primary">
                                        <span>Net Worth</span>
                                        <span id="summary-net-worth">$0</span>
                                    </div>
                                </div>
                            </div>

                            <div class="summary-card">
                                <h4>Asset Allocation</h4>
                                <div class="chart-container">
                                    <canvas id="assetAllocationChart" width="200" height="200"></canvas>
                                </div>
                            </div>

                            <div class="summary-card">
                                <h4>Liability Breakdown</h4>
                                <div class="chart-container">
                                    <canvas id="liabilityBreakdownChart" width="200" height="200"></canvas>
                                </div>
                            </div>

                            <div class="summary-card">
                                <h4>Key Ratios</h4>
                                <div class="summary-items">
                                    <div class="summary-item">
                                        <span>Debt-to-Asset</span>
                                        <span id="debt-to-asset-ratio">0%</span>
                                    </div>
                                    <div class="summary-item">
                                        <span>Liquidity Ratio</span>
                                        <span id="liquidity-ratio">0%</span>
                                    </div>
                                    <div class="summary-item">
                                        <span>Savings Rate</span>
                                        <span id="savings-rate">0%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Analytics Tab -->
            <div id="analytics" class="tab-content">
                <div class="analytics-dashboard">
                    <div class="analytics-header">
                        <h2>Financial Analytics</h2>
                        <p>Comprehensive insights into your financial health and growth potential</p>
                    </div>

                    <div class="analytics-grid">
                        <div class="analytics-card">
                            <h3>Income Breakdown</h3>
                            <div class="chart-wrapper">
                                <canvas id="portfolioChart" width="350" height="250"></canvas>
                            </div>
                        </div>

                        <div class="analytics-card">
                            <h3>Expense Analysis</h3>
                            <div class="chart-wrapper">
                                <canvas id="expenseChart" width="350" height="250"></canvas>
                            </div>
                        </div>

                        <div class="analytics-card">
                            <h3>Cash Flow Trend</h3>
                            <div class="chart-wrapper">
                                <canvas id="cashflowChart" width="350" height="250"></canvas>
                            </div>
                        </div>

                        <div class="analytics-card">
                            <h3>Financial Health Score</h3>
                            <div class="health-score">
                                <div class="score-circle">
                                    <span id="health-score">85</span>
                                </div>
                                <div class="score-details">
                                    <div class="score-item">
                                        <span>Debt-to-Income</span>
                                        <span id="debt-income-ratio">25%</span>
                                    </div>
                                    <div class="score-item">
                                        <span>Emergency Fund</span>
                                        <span>3.2 months</span>
                                    </div>
                                    <div class="score-item">
                                        <span>Savings Rate</span>
                                        <span>15%</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="analytics-card large">
                            <h3>Wealth Projection (10 Years)</h3>
                            <div class="chart-wrapper">
                                <canvas id="growthChart" width="700" height="300"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Scripts -->
    <script src="utils.js"></script>
    <script src="storage.js"></script>
    <script src="calculations.js"></script>
    <script src="charts.js"></script>
    <script src="airtable-integration.js"></script>
    <script src="app.js"></script>

    <!-- Simple Save/Load Functions -->
    <script>
        // Simple Airtable Integration
        const AIRTABLE_BASE_ID = 'appBJSpCa8ue7cqiA';
        const AIRTABLE_API_KEY = 'patm8ZuPbmf2JVGX6.9b1907acddb8cea5400ae18009490f5cc6d6f087433ad394cf9bbad2a731e268';
        const AIRTABLE_TABLE = 'Students';
        const AIRTABLE_URL = `https://api.airtable.com/v0/${AIRTABLE_BASE_ID}/${AIRTABLE_TABLE}`;
        
        // Show notification
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => notification.classList.add('show'), 100);
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => notification.remove(), 300);
            }, 4000);
        }
        
        // Show status message
        function showStatus(message, type = 'info') {
            const statusDiv = document.getElementById('statusMessage');
            statusDiv.className = `status-message status-${type}`;
            statusDiv.textContent = message;
        }
        
        // Get current form data
        function getCurrentData() {
            const data = {};
            let hasData = false;
            
            document.querySelectorAll('[data-field]').forEach(input => {
                const value = parseFloat(input.value) || 0;
                if (value !== 0) {
                    data[input.dataset.field] = value;
                    hasData = true;
                }
            });
            
            return { data, hasData };
        }
        
        // Set form data
        function setFormData(data) {
            Object.entries(data).forEach(([field, value]) => {
                const input = document.querySelector(`[data-field="${field}"]`);
                if (input) {
                    input.value = value;
                }
            });
            
            // Trigger calculations if app is loaded
            if (window.app) {
                window.app.calculateAll();
            }
        }
        
        // Auto-save function (debounced)
        let autoSaveTimeout;
        function scheduleAutoSave() {
            const email = document.getElementById('userEmail').value.trim();
            const name = document.getElementById('userName').value.trim();
            
            // Only auto-save if we have email and name
            if (!email || !name) return;
            
            clearTimeout(autoSaveTimeout);
            autoSaveTimeout = setTimeout(() => {
                autoSaveData();
            }, 3000); // Wait 3 seconds after user stops typing
        }
        
        // Auto-save data quietly
        async function autoSaveData() {
            const email = document.getElementById('userEmail').value.trim();
            const name = document.getElementById('userName').value.trim();
            
            if (!email || !name) return;
            
            const { data: currentData, hasData } = getCurrentData();
            
            try {
                // Save even if form is empty (just email/name)
                const searchUrl = `${AIRTABLE_URL}?filterByFormula={Email}='${email}'`;
                
                const searchResponse = await fetch(searchUrl, {
                    headers: {
                        'Authorization': `Bearer ${AIRTABLE_API_KEY}`,
                        'Content-Type': 'application/json'
                    }
                });
                
                if (!searchResponse.ok) return;
                
                const searchData = await searchResponse.json();
                
                const record = {
                    fields: {
                        'Email': email,
                        'Name': name,
                        'Last Updated': new Date().toISOString(),
                        'Financial Data': JSON.stringify(currentData),
                        'Net Worth': calculateNetWorth(currentData),
                        'Monthly Cash Flow': calculateMonthlyCashFlow(currentData),
                        'Source': 'simple_app_autosave'
                    }
                };
                
                let response;
                if (searchData.records.length > 0) {
                    // Update existing record
                    const recordId = searchData.records[0].id;
                    response = await fetch(`${AIRTABLE_URL}/${recordId}`, {
                        method: 'PATCH',
                        headers: {
                            'Authorization': `Bearer ${AIRTABLE_API_KEY}`,
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(record)
                    });
                } else {
                    // Create new record
                    response = await fetch(AIRTABLE_URL, {
                        method: 'POST',
                        headers: {
                            'Authorization': `Bearer ${AIRTABLE_API_KEY}`,
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ records: [record] })
                    });
                }
                
                if (response.ok && hasData) {
                    // Only show notification if there's actual financial data
                    showNotification('💾 Auto-saved!', 'success');
                }
                
            } catch (error) {
                console.error('Auto-save error:', error);
            }
        }
        
        // Save data to Airtable
        async function saveData() {
            const email = document.getElementById('userEmail').value.trim();
            const name = document.getElementById('userName').value.trim();
            
            if (!email) {
                showNotification('Please enter your email address', 'error');
                showStatus('❌ Please enter your email address', 'error');
                return;
            }
            
            if (!email.includes('@')) {
                showNotification('Please enter a valid email address', 'error');
                showStatus('❌ Please enter a valid email address', 'error');
                return;
            }
            
            if (!name) {
                showNotification('Please enter your full name', 'error');
                showStatus('❌ Please enter your full name', 'error');
                return;
            }
            
            const { data: currentData, hasData } = getCurrentData();
            
            if (!hasData) {
                showNotification('Please fill out some financial information first, then save your data', 'warning');
                showStatus('💡 Fill out some financial fields below, then click Save Data', 'warning');
                return;
            }
            
            showStatus('Saving data to Airtable...', 'info');
            
            try {
                // Simplified search - avoid special characters in filter
                const encodedEmail = encodeURIComponent(email);
                const searchUrl = `${AIRTABLE_URL}?filterByFormula=FIND("${email}",{Email})`;
                
                console.log('Searching for user...', searchUrl);
                
                const searchResponse = await fetch(searchUrl, {
                    headers: {
                        'Authorization': `Bearer ${AIRTABLE_API_KEY}`,
                        'Content-Type': 'application/json'
                    }
                });
                
                console.log('Search response status:', searchResponse.status);
                
                if (!searchResponse.ok) {
                    const errorText = await searchResponse.text();
                    console.error('Search error:', errorText);
                    throw new Error(`Search failed: ${searchResponse.status} - ${errorText}`);
                }
                
                const searchData = await searchResponse.json();
                console.log('Search results:', searchData);
                
                // Create clean record data
                const record = {
                    fields: {
                        'Email': email,
                        'Name': name,
                        'Last Updated': new Date().toISOString(),
                        'Financial Data': JSON.stringify(currentData),
                        'Net Worth': Math.round(calculateNetWorth(currentData) * 100) / 100,
                        'Monthly Cash Flow': Math.round(calculateMonthlyCashFlow(currentData) * 100) / 100,
                        'Source': 'simple_app'
                    }
                };
                
                console.log('Record to save:', record);
                
                let response;
                if (searchData.records && searchData.records.length > 0) {
                    // Update existing record
                    const recordId = searchData.records[0].id;
                    console.log('Updating existing record:', recordId);
                    
                    response = await fetch(`${AIRTABLE_URL}/${recordId}`, {
                        method: 'PATCH',
                        headers: {
                            'Authorization': `Bearer ${AIRTABLE_API_KEY}`,
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(record)
                    });
                } else {
                    // Create new record
                    console.log('Creating new record');
                    
                    response = await fetch(AIRTABLE_URL, {
                        method: 'POST',
                        headers: {
                            'Authorization': `Bearer ${AIRTABLE_API_KEY}`,
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ records: [record] })
                    });
                }
                
                console.log('Save response status:', response.status);
                
                if (response.ok) {
                    const result = await response.json();
                    console.log('Save successful:', result);
                    showStatus('✅ Data saved successfully!', 'success');
                    showNotification('Data saved to Airtable successfully!', 'success');
                } else {
                    const errorData = await response.text();
                    console.error('Save failed:', errorData);
                    throw new Error(`Save failed: ${response.status} - ${errorData}`);
                }
                
            } catch (error) {
                console.error('Save error:', error);
                showStatus(`❌ Save failed: ${error.message}`, 'error');
                showNotification('Failed to save data. Please try again.', 'error');
            }
        }
        
        // Load data from Airtable
        async function loadData() {
            const email = document.getElementById('userEmail').value.trim();
            
            if (!email) {
                showNotification('Please enter your email address', 'error');
                return;
            }
            
            if (!email.includes('@')) {
                showNotification('Please enter a valid email address', 'error');
                return;
            }
            
            showStatus('Loading data from Airtable...', 'info');
            
            try {
                const searchUrl = `${AIRTABLE_URL}?filterByFormula={Email}='${email}'`;
                
                const response = await fetch(searchUrl, {
                    headers: {
                        'Authorization': `Bearer ${AIRTABLE_API_KEY}`,
                        'Content-Type': 'application/json'
                    }
                });
                
                if (!response.ok) {
                    throw new Error(`Load failed: ${response.status}`);
                }
                
                const data = await response.json();
                
                if (data.records.length > 0) {
                    const record = data.records[0];
                    const financialData = JSON.parse(record.fields['Financial Data'] || '{}');
                    
                    // Load the name too
                    document.getElementById('userName').value = record.fields['Name'] || '';
                    
                    setFormData(financialData);
                    
                    const lastUpdated = new Date(record.fields['Last Updated']).toLocaleDateString();
                    showStatus(`✅ Data loaded successfully! Last updated: ${lastUpdated}`, 'success');
                    showNotification('Data loaded from Airtable!', 'success');
                } else {
                    showStatus('No saved data found for this email address.', 'warning');
                    showNotification('No saved data found for this email.', 'warning');
                }
                
            } catch (error) {
                console.error('Load error:', error);
                showStatus(`❌ Load failed: ${error.message}`, 'error');
                showNotification('Failed to load data. Please try again.', 'error');
            }
        }
        
        // Simple calculations
        function calculateNetWorth(data) {
            const assets = calculateTotal(data, [
                'cash_on_hand', 'personal_checking', 'personal_savings', 'business_checking', 'business_savings',
                'money_market', 'certificates_deposit', 'business_1', 'business_2', 'business_3',
                'stocks', 'bonds', 'mutual_funds', 'ira', '401k', 'primary_residence', 'auto_1', 'auto_2', 'other_personal_assets'
            ]);
            
            const liabilities = calculateTotal(data, [
                'medical_dental', 'credit_card_1', 'credit_card_2', 'credit_card_3', 'credit_card_4', 'credit_card_5',
                'primary_mortgage', 'heloc', 'investment_mortgage', 'auto_loan_1', 'auto_loan_2', 'student_loans', 'personal_loans_balance'
            ]);
            
            return assets - liabilities;
        }
        
        function calculateMonthlyCashFlow(data) {
            const income = calculateTotal(data, [
                'salary_wages', 'distributions', 'commissions', 'bonus', 'interest_income',
                'dividends', 'royalties', 'business_income', 'real_estate_income'
            ]);
            
            const expenses = calculateTotal(data, [
                'mortgage_rent', 'heloc_payment', 'hoa_fees', 'cell_phone_1', 'cell_phone_2',
                'internet', 'cable_satellite', 'home_security', 'home_insurance', 'electricity', 'gas',
                'water_sewer', 'waste_removal', 'repairs_maintenance', 'lawncare_pest',
                'auto_payment_1', 'auto_payment_2', 'auto_insurance', 'registration_tags', 'gas_fuel', 'auto_repairs',
                'groceries', 'restaurants', 'streaming', 'music', 'movies', 'concerts', 'sporting_events',
                'live_theater', 'outdoor_activities'
            ]);
            
            return income - expenses;
        }
        
        function calculateTotal(data, fields) {
            return fields.reduce((sum, field) => sum + (data[field] || 0), 0);
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Remove loading screen
            setTimeout(() => {
                const loadingScreen = document.getElementById('loading-screen');
                const appContainer = document.getElementById('app');
                
                if (loadingScreen) {
                    loadingScreen.style.display = 'none';
                }
                
                if (appContainer) {
                    appContainer.style.display = 'block';
                }
            }, 1000);
            
            // Add event listeners
            document.getElementById('saveToAirtable').addEventListener('click', saveData);
            
            // Add auto-save listeners to all financial inputs
            document.querySelectorAll('[data-field]').forEach(input => {
                input.addEventListener('input', scheduleAutoSave);
                input.addEventListener('change', scheduleAutoSave);
            });
            
            // Add listeners to email and name fields
            document.getElementById('userEmail').addEventListener('input', scheduleAutoSave);
            document.getElementById('userName').addEventListener('input', scheduleAutoSave);
            
            // Test connection on load
            setTimeout(() => {
                fetch(`${AIRTABLE_URL}?maxRecords=1`, {
                    headers: {
                        'Authorization': `Bearer ${AIRTABLE_API_KEY}`
                    }
                }).then(response => {
                    if (response.ok) {
                        console.log('✅ Airtable connection working');
                    } else {
                        console.error('❌ Airtable connection failed');
                        showNotification('Warning: Could not connect to Airtable', 'warning');
                    }
                });
            }, 2000);
        });
    </script>
</body>
</html>
